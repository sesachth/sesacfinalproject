<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="~{/thymeleaf/html/common/default_layout}">


<head>
<th:block layout:fragment="css">
	<link rel="stylesheet" th:href="@{/css/admin/admin.css}" />
	<link rel="stylesheet" th:href="@{/css/admin/admin_product.css}">

	<!-- 제이쿼리 -->
    <script th:src="@{https://code.jquery.com/jquery-3.3.1.min.js}"></script>

	<!-- 부트스트랩 -->
    <link 
        th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}" 
        rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
        crossorigin="anonymous">
    <script 
        th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js}" 
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
        crossorigin="anonymous"></script>

	<style>
	/* 드롭다운 버튼 테두리 제거 */
	.btn-reveal-trigger .btn-reveal {
		border: none !important;
		box-shadow: none !important;
		background: transparent !important;
	}

	.btn-reveal-trigger .btn-reveal:hover,
	.btn-reveal-trigger .btn-reveal:focus,
	.btn-reveal-trigger .btn-reveal:active {
		border: none !important;
		box-shadow: none !important;
		background: transparent !important;
	}

	/* 드롭다운 화살표 제거 */
	.dropdown-caret-none::after {
		display: none !important;
	}
	</style>

</head>

<body>
<th:block layout:fragment="wrapper">
	<div class="outside-container">
		<div class="main-container">
			<div th:replace="~{thymeleaf/html/common/include::profile}"></div>
			<div th:replace="~{thymeleaf/html/common/include::sidebar}"></div>


			<!-- 상단 버튼 -->
			<div class="product-actions">
				<button type="button" class="btn btn-primary" id="addBtn">
					Add Product</button>
			</div>

			<!-- 본문 콘텐츠 영역 -->
			<div layout:fragment="content" class="main-content">
				<!-- 상단 컨트롤 바 -->
				<div class="control-bar">
					<div class="left-controls">
						<!-- 물품명 검색바 -->
						<div class="search-container">
							<input type="text" id="productNameSearch" class="search-input" placeholder="제품명 입력">
							<div class="search-icon">
								<div class="magnifier">
									<div class="magnifier-circle"></div>
									<div class="magnifier-line"></div>
								</div>
							</div>
							<button id="searchProductBtn">검색</button>
						</div>

						<!-- 전체 필터 -->
						<div class="dropdown-group">
							<!-- 카테고리 필터 -->
							<div class="dropdown-container">
								<div class="dropdown-select" onclick="toggleDropdown('categoryMenu')">
									Category
									<svg class="arrow-icon" width="10" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path d="M1 1L5.97126 6L11 1" stroke="#68269E" stroke-width="1.2" stroke-linecap="round"/>
									</svg>
								</div>
								<div class="dropdown-menu" id="categoryMenu">
									<div class="dropdown-item" data-value="" onclick="selectItem(this, 'categoryMenu', '')">Category</div>
									<div class="dropdown-item" data-value="가공식품" onclick="selectItem(this, 'categoryMenu', '가공식품')">가공식품</div>
									<div class="dropdown-item" data-value="건강기능식품" onclick="selectItem(this, 'categoryMenu', '건강기능식품')">건강기능식품</div>
									<div class="dropdown-item" data-value="그 밖의 화장품류" onclick="selectItem(this, 'categoryMenu', '그 밖의 화장품류')">그 밖의 화장품류</div>
									<div class="dropdown-item" data-value="세정용 화장품류" onclick="selectItem(this, 'categoryMenu', '세정용 화장품류')">세정용 화장품류</div>
									<div class="dropdown-item" data-value="세제류" onclick="selectItem(this, 'categoryMenu', '세제류')">세제류</div>
									<div class="dropdown-item" data-value="음료" onclick="selectItem(this, 'categoryMenu', '음료')">음료</div>
									<div class="dropdown-item" data-value="의류" onclick="selectItem(this, 'categoryMenu', '의류')">의류</div>
									<div class="dropdown-item" data-value="의약외품류" onclick="selectItem(this, 'categoryMenu', '의약외품류')">의약외품류</div>
									<div class="dropdown-item" data-value="잡화류" onclick="selectItem(this, 'categoryMenu', '잡화류')">잡화류</div>
									<div class="dropdown-item" data-value="전자제품류" onclick="selectItem(this, 'categoryMenu', '전자제품류')">전자제품류</div>
									<div class="dropdown-item" data-value="제과류" onclick="selectItem(this, 'categoryMenu', '제과류')">제과류</div>
								</div>
								<!-- hidden input 추가 -->
								<input type="hidden" id="categoryFilter" value="" />
							</div>
						
							<!-- 취급주의 필터 -->
							<div class="dropdown-container">
								<div class="dropdown-select" onclick="toggleDropdown('fragileMenu')">
									Fragile
									<svg class="arrow-icon" width="10" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path d="M1 1L5.97126 6L11 1" stroke="#68269E" stroke-width="1.2" stroke-linecap="round"/>
									</svg>
								</div>
								<div class="dropdown-menu" id="fragileMenu">
									<div class="dropdown-item" data-value="" onclick="selectItem(this, 'fragileMenu', '')">Fragile</div>
									<div class="dropdown-item" data-value="true" onclick="selectItem(this, 'fragileMenu', 'true')">Yes</div>
									<div class="dropdown-item" data-value="false" onclick="selectItem(this, 'fragileMenu', 'false')">No</div>
								</div>
								<!-- hidden input 추가 -->
								<input type="hidden" id="fragileFilter" value="" />
							</div>
						</div>
						<button class="inquiry-btn" id="filterBtn">조회</button>
					</div>
					<!--상단 컨트롤 바 종료 부분-->

					<div class="right-controls">

						
					</div>
				</div>



				<!-- 제품 목록 테이블 -->
				<div class="table-container">
					<table class="product-table" id="productTable">

						<h1>Product List</h1>

						<thead>
							<tr>
								<th class="d-none"></th>
								<th>NO.</th>
								<th>Name</th>
								<th>Width</th>
								<th>Depth</th>
								<th>Height</th>
								<th>Weight</th>
								<th>Category</th>
								<th>Fragile</th>
							</tr>
						</thead>


						<tbody id="listBody">
							<tr th:each="product, iterStat : ${products}">
								<td class="productId d-none" th:text="${product.productId}"></td>
								<td class="index" th:text="${iterStat.index + 1}"></td>
								<!-- ID 대신 1부터 시작하는 인덱스 -->
								<td class="name" th:text="${product.name}"></td>
								<td class="width" th:text="${product.width}"></td>
								<td class="depth" th:text="${product.depth}"></td>
								<td class="height" th:text="${product.height}"></td>
								<td class="weight" th:text="${product.weight}"></td>
								<td class="category" th:text="${product.category}"></td>
								<td class="fragile"
									th:text="${product.fragile != null ? (product.fragile ? 'Yes' : 'No') : 'No'}"></td>

							</tr>

							<tr th:if="${products.size() == 0}">
								<td colspan="9" style="text-align: center;">No products
									found.</td>
							</tr>

						</tbody>

					</table>
				</div>

				<!-- 페이지네이션 -->
				<div class="pagination">
					<button id="prevGroup">«</button>
					<span id="pageNumbers"></span>
					<button id="nextGroup">»</button>
				</div>



			</div>
		</div>
	</div>
</th:block>

	<!-- 물품 추가, 수정 시 뜰 모달창 -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Add Product</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form th:action="@{/admin/product/add}" method="post" id="productAdd">
						<input id="modalIndex" type="hidden" name="index" />
						
						<div class="form-group">
							<label for="modalName">Name:</label>
							<input id="modalName" type="text" name="name" class="form-control" required />
						</div>
				
						<div class="form-group">
							<label for="modalWidth">Width:</label>
							<input id="modalWidth" type="number" name="width" class="form-control" required />
						</div>
				
						<div class="form-group">
							<label for="modalDepth">Depth:</label>
							<input id="modalDepth" type="number" name="depth" class="form-control" required />
						</div>
				
						<div class="form-group">
							<label for="modalHeight">Height:</label>
							<input id="modalHeight" type="number" name="height" class="form-control" required />
						</div>
				
						<div class="form-group">
							<label for="modalWeight">Weight:</label>
							<input id="modalWeight" type="number" name="weight" class="form-control" required />
						</div>
				
						<div class="form-group">
							<label for="modalCategory">Category:</label>
							<div class="dropdown-container">
								<div class="dropdown-select" onclick="toggleDropdown('modalCategoryMenu')">
									<span id="selectedCategory">선택하세요</span>
									<svg class="arrow-icon" width="10" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path d="M1 1L5.97126 6L11 1" stroke="#68269E" stroke-width="1.2" stroke-linecap="round"/>
									</svg>
								</div>
								<div class="dropdown-menu" id="modalCategoryMenu">
									<div class="dropdown-item" onclick="selectModalCategory(this, '')">선택하세요</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '잡화류')">잡화류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '전자제품류')">전자제품류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '가공식품')">가공식품</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '제과류')">제과류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '음료')">음료</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '의류')">의류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '세정용 화장품류')">세정용 화장품류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '그 밖의 화장품류')">그 밖의 화장품류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '의약외품류')">의약외품류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '세제류')">세제류</div>
									<div class="dropdown-item" onclick="selectModalCategory(this, '건강기능식품')">건강기능식품</div>
								</div>
								<input type="hidden" id="modalCategory" name="category" required />
							</div>
						</div>
				
						<div class="form-group">
							<label for="fragileCheckbox">Fragile:</label>
							<input type="checkbox" name="fragile" id="fragileCheckbox" value="true" />
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" id="submit-btn">Submit</button>
				</div>
			</div>
		</div>
	</div>


	<script th:src="@{/js/admin/admin_product.js}"></script>
</body>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="~{/thymeleaf/html/common/default_layout}">


<head>
<th:block layout:fragment="css">
	<link rel="stylesheet" th:href="@{/css/admin/admin.css}" />
	<link rel="stylesheet" th:href="@{/css/admin/admin_product.css}">

	<!-- ì œì´ì¿¼ë¦¬ -->
    <script th:src="@{https://code.jquery.com/jquery-3.3.1.min.js}"></script>

	<!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© -->
    <link 
        th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}" 
        rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
        crossorigin="anonymous">
    <script 
        th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js}" 
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
        crossorigin="anonymous"></script>

	<style>
/* ë“œë¡­ë‹¤ìš´ ë²„íŠ¼ í…Œë‘ë¦¬ ì œê±° */
.btn-reveal-trigger .btn-reveal {
	border: none !important;
	box-shadow: none !important;
	background: transparent !important;
}

.btn-reveal-trigger .btn-reveal:hover, .btn-reveal-trigger .btn-reveal:focus,
	.btn-reveal-trigger .btn-reveal:active {
	border: none !important;
	box-shadow: none !important;
	background: transparent !important;
}

/* ë“œë¡­ë‹¤ìš´ í™”ì‚´í‘œ ì œê±° */
.dropdown-caret-none::after {
	display: none !important;
}
</style>
</head>

<body>
<th:block layout:fragment="wrapper">
	<div class="outside-container">
		<div class="main-container">
			<div th:replace="~{thymeleaf/html/common/include::profile}"></div>
			<div th:replace="~{thymeleaf/html/common/include::sidebar}"></div>


			<!-- ìƒë‹¨ ë²„íŠ¼ -->
			<div class="product-actions">
				<button type="button" class="btn btn-primary" id="addBtn">
					Add Product</button>
			</div>
				<!-- ìƒë‹¨ ë²„íŠ¼ -->
				<div class="product-actions">
					<button type="button" class="btn btn-primary" id="addBtn">
						Add Product</button>
				</div>
				<div layout:fragment="content" class="main-content">
					<!-- ì œí’ˆ ëª©ë¡ í…Œì´ë¸” -->
					<div class="table-container">

						<div class="search-filter-container">
							<!-- ê²€ìƒ‰ í¼ -->
							<form class="search-form" style="display: inline-block;">
								<input type="text" name="name" placeholder="ì œí’ˆëª… ê²€ìƒ‰" />
								<button type="submit">ê²€ìƒ‰</button>
							</form>

							<!-- í•„í„° -->
							<label for="categoryFilter">Category:</label> <select
								id="categoryFilter">
								<option value="ì „ì²´">ì „ì²´</option>
								<option value="ì¡í™”ë¥˜" th:selected="${selectedCategory eq 'ì¡í™”ë¥˜'}">ì¡í™”ë¥˜</option>
								<option value="ì „ìì œí’ˆë¥˜"
									th:selected="${selectedCategory eq 'ì „ìì œí’ˆë¥˜'}">ì „ìì œí’ˆë¥˜</option>
								<option value="ê°€ê³µì‹í’ˆ" th:selected="${selectedCategory eq 'ê°€ê³µì‹í’ˆ'}">ê°€ê³µì‹í’ˆ</option>
								<option value="ì œê³¼ë¥˜" th:selected="${selectedCategory eq 'ì œê³¼ë¥˜'}">ì œê³¼ë¥˜</option>
								<option value="ìŒë£Œ" th:selected="${selectedCategory eq 'ìŒë£Œ'}">ìŒë£Œ</option>
								<option value="ì˜ë¥˜" th:selected="${selectedCategory eq 'ì˜ë¥˜'}">ì˜ë¥˜</option>
								<option value="ì„¸ì •ìš© í™”ì¥í’ˆë¥˜"
									th:selected="${selectedCategory eq 'ì„¸ì •ìš© í™”ì¥í’ˆë¥˜'}">ì„¸ì •ìš©
									í™”ì¥í’ˆë¥˜</option>
								<option value="ê·¸ ë°–ì˜ í™”ì¥í’ˆë¥˜"
									th:selected="${selectedCategory eq 'ê·¸ ë°–ì˜ í™”ì¥í’ˆë¥˜'}">ê·¸ ë°–ì˜
									í™”ì¥í’ˆë¥˜</option>
								<option value="ì˜ì•½ì™¸í’ˆë¥˜"
									th:selected="${selectedCategory eq 'ì˜ì•½ì™¸í’ˆë¥˜'}">ì˜ì•½ì™¸í’ˆë¥˜</option>
								<option value="ì„¸ì œë¥˜" th:selected="${selectedCategory eq 'ì„¸ì œë¥˜'}">ì„¸ì œë¥˜</option>
								<option value="ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ"
									th:selected="${selectedCategory eq 'ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ'}">ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ</option>
								<!-- ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ì˜µì…˜ë“¤ -->
							</select> <label for="fragileFilter">Fragile:</label> <select
								id="fragileFilter">
								<option value="ì „ì²´">ì „ì²´</option>
								<option value="true">Yes</option>
								<option value="false">No</option>
							</select>
						</div>

						<table class="product-table" id="productTable">

							<h1>Product List</h1>

							<thead>
								<tr>
									<th class="d-none"></th>
									<th>NO.</th>
									<th>Name</th>
									<th>Width</th>
									<th>Depth</th>
									<th>Height</th>
									<th>Weight</th>
									<th>Category</th>
									<th>Fragile</th>
								</tr>
							</thead>


							<tbody id="listBody">
								<tr th:each="product, iterStat : ${products}">
									<td class="productId d-none" th:text="${product.productId}"></td>
									<td class="index" th:text="${iterStat.index + 1}"></td>
									<!-- ID ëŒ€ì‹  1ë¶€í„° ì‹œì‘í•˜ëŠ” ì¸ë±ìŠ¤ -->
									<td class="name" th:text="${product.name}"></td>
									<td class="width" th:text="${product.width}"></td>
									<td class="depth" th:text="${product.depth}"></td>
									<td class="height" th:text="${product.height}"></td>
									<td class="weight" th:text="${product.weight}"></td>
									<td class="category" th:text="${product.category}"></td>
									<td class="isFragile"
										th:text="${product.isFragile != null ? (product.isFragile ? 'Yes' : 'No') : 'No'}"></td>
								</tr>

								<tr th:if="${products.size() == 0}">
									<td colspan="9" style="text-align: center;">No products
										found.</td>
								</tr>

							</tbody>

						</table>
					</div>
					<!--ìƒë‹¨ ì»¨íŠ¸ë¡¤ ë°” ì¢…ë£Œ ë¶€ë¶„-->

					<div class="right-controls">

						
					</div>
				</div>



				<!-- ì œí’ˆ ëª©ë¡ í…Œì´ë¸” -->
				<div class="table-container">
					<table class="product-table" id="productTable">

						<h1>Product List</h1>

						<thead>
							<tr>
								<th class="d-none"></th>
								<th>NO.</th>
								<th>Name</th>
								<th>Width</th>
								<th>Depth</th>
								<th>Height</th>
								<th>Weight</th>
								<th>Category</th>
								<th>Fragile</th>
							</tr>
						</thead>


						<tbody id="listBody">
							<tr th:each="product, iterStat : ${products}">
								<td class="productId d-none" th:text="${product.productId}"></td>
								<td class="index" th:text="${iterStat.index + 1}"></td>
								<!-- ID ëŒ€ì‹  1ë¶€í„° ì‹œì‘í•˜ëŠ” ì¸ë±ìŠ¤ -->
								<td class="name" th:text="${product.name}"></td>
								<td class="width" th:text="${product.width}"></td>
								<td class="depth" th:text="${product.depth}"></td>
								<td class="height" th:text="${product.height}"></td>
								<td class="weight" th:text="${product.weight}"></td>
								<td class="category" th:text="${product.category}"></td>
								<td class="fragile"
									th:text="${product.fragile != null ? (product.fragile ? 'Yes' : 'No') : 'No'}"></td>

							</tr>

							<tr th:if="${products.size() == 0}">
								<td colspan="9" style="text-align: center;">No products
									found.</td>
							</tr>

						</tbody>

					</table>
				</div>

				<!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
				<div class="pagination">
					<button id="prevGroup">Â«</button>
					<span id="pageNumbers"></span>
					<button id="nextGroup">Â»</button>
				</div>



			</div>
		</div>
	</div>
</th:block>

	<!-- ë¬¼í’ˆ ì¶”ê°€, ìˆ˜ì • ì‹œ ëœ° ëª¨ë‹¬ì°½ -->
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel">
		<div class="modal-dialog modal-full" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel">Add
						Product</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close">
						<span class="visually-hidden">Close</span>
					</button>
				</div>
				<div class="modal-body">
					<form th:action="@{/admin/product/add}" method="post"
						id="productAdd">
						<input id="modalIndex" type="hidden" name="index" /> 
							Name: <input id="modalName" type="text" name="name" required /><br />
							Width: <input id="modalWidth" type="number" name="width" required /><br />
							Depth: <input id="modalDepth" type="number" name="depth" required /><br />
							Height: <input id="modalHeight" type="number" name="height" required /><br /> 
							Weight: <input id="modalWeight" type="number"name="weight" required /><br /> 
							Category: 
							<select id="modalCategory" name="category" required>
								<option value="">ì„ íƒí•˜ì„¸ìš”</option>
								<option value="ì¡í™”ë¥˜">ì¡í™”ë¥˜</option>
								<option value="ì „ìì œí’ˆë¥˜">ì „ìì œí’ˆë¥˜</option>
								<option value="ê°€ê³µì‹í’ˆ">ê°€ê³µì‹í’ˆ</option>
								<option value="ì œê³¼ë¥˜">ì œê³¼ë¥˜</option>
								<option value="ìŒë£Œ">ìŒë£Œ</option>
								<option value="ì˜ë¥˜">ì˜ë¥˜</option>
								<option value="ì„¸ì •ìš© í™”ì¥í’ˆë¥˜">ì„¸ì •ìš© í™”ì¥í’ˆë¥˜</option>
								<option value="ê·¸ ë°–ì˜ í™”ì¥í’ˆë¥˜">ê·¸ ë°–ì˜ í™”ì¥í’ˆë¥˜</option>
								<option value="ì˜ì•½ì™¸í’ˆë¥˜">ì˜ì•½ì™¸í’ˆë¥˜</option>
								<option value="ì„¸ì œë¥˜">ì„¸ì œë¥˜</option>
								<option value="ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ">ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ</option>
							</select><br /> 
							Fragile: <input type="checkbox" name="isFragile" id="fragileCheckbox" value="1" /> 
									 <input type="hidden"name="isFragileHidden" id="isFragileHidden" value="0" />>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" id="submit-btn">Submit</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		// í˜ì´ì§€ë„¤ì´ì…˜ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜
		let currentPage = 1;
		let rowsPerPage = 20;
		let pageGroupSize = 10;
		let totalPages = 1;
		let currentProducts = []; // ì „ì²´ ì œí’ˆ ë°ì´í„° ì €ì¥ìš©

		// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
		$(document).ready(function() {
			initializeEventHandlers();
			initializePaginationButtons(); // í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ì´ˆê¸°í™” ì¶”ê°€
			searchProducts();
		});
		

		// ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”
		function initializeEventHandlers() {
			// Add Product ë²„íŠ¼ ì´ë²¤íŠ¸
			$("#addBtn").on("click", function() {
				clearModalInputs();
				$("#exampleModalLabel").text("Add Product");
				$("#exampleModal").modal('show');
			});

			// Submit ë²„íŠ¼ ì´ë²¤íŠ¸
			$("#submit-btn").on("click", handleSubmit);

			// ê²€ìƒ‰ í¼ ì œì¶œ ì´ë²¤íŠ¸
			$(".search-form").on("submit", function(e) {
				e.preventDefault();
				searchProducts();
			});

			// í•„í„° ë³€ê²½ ì´ë²¤íŠ¸
			$("#categoryFilter, #fragileFilter").on("change", function() {
				searchProducts();
			});
		}

		// í†µí•© ê²€ìƒ‰ í•¨ìˆ˜
		function searchProducts() {
			let searchQuery = $(".search-form input[name='name']").val().trim();
			let filterInfo = {
				name: searchQuery,
				filter: $("#categoryFilter").val()?.trim() || "ì „ì²´",
				isFragile: $("#fragileFilter").val()?.trim() || "ì „ì²´"
			};

			$.ajax({
				url: "/admin/product/search",
				type: "GET",
				data: filterInfo,
				success: function(data) {
					updateProductList(data);
				},
				error: function(xhr, status, error) {
					console.error("ê²€ìƒ‰ ì˜¤ë¥˜:", error);
					alert("ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
				}
			});
		}

		// ì œí’ˆ ëª©ë¡ ì—…ë°ì´íŠ¸
		function updateProductList(products) {
			currentProducts = products;
			// ìµœì†Œ 1í˜ì´ì§€ëŠ” í•­ìƒ ì¡´ì¬í•˜ë„ë¡ ì„¤ì •
			totalPages = Math.max(1, Math.ceil(products.length / rowsPerPage));
			currentPage = 1; // ê²€ìƒ‰/í•„í„°ë§ ì‹œ ì²« í˜ì´ì§€ë¡œ ì´ˆê¸°í™”
			displayCurrentPage();
			updatePagination();
		}

		// í˜„ì¬ í˜ì´ì§€ í‘œì‹œ
		function displayCurrentPage() {
			let startIndex = (currentPage - 1) * rowsPerPage;
			let endIndex = Math.min(startIndex + rowsPerPage, currentProducts.length);
			let currentPageProducts = currentProducts.slice(startIndex, endIndex);
			
			let html = '';
			if (currentPageProducts.length === 0) {
				html = '<tr><td colspan="9" class="text-center">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
			} else {
				currentPageProducts.forEach((product, index) => {
					// isFragile ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ í™•ì¸
					let isFragileValue = product.fragile === true || product.fragile === 1;
					
					html += `<tr>
						<td class="productId d-none">${product.productId}</td>
						<td class="index">${startIndex + index + 1}</td>
						<td class="name">${product.name}</td>
						<td class="width">${product.width}</td>
						<td class="depth">${product.depth}</td>
						<td class="height">${product.height}</td>
						<td class="weight">${product.weight}</td>
						<td class="category">${product.category}</td>
						<td class="isFragile">${isFragileValue ? 'Yes' : 'No'}</td>
						<td>
							<div class="btn-reveal-trigger position-static">
								<button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal" type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true" aria-expanded="false" data-bs-reference="parent">
									â€¢â€¢â€¢
								</button>
								<div class="dropdown-menu py-2">
									<a class="dropdown-item editBtn" onclick="handleEdit(this)">Edit</a>
									<a class="dropdown-item deleteBtn">Delete</a>
								</div>
							</div>
						</td>
						
					</tr>`;
				});
			}
			
			$("#listBody").html(html);
			bindDeleteButtons();
		}

		// í˜ì´ì§€ë„¤ì´ì…˜ UI ì—…ë°ì´íŠ¸
		function updatePagination() {
			let pageNumbersElement = $("#pageNumbers");
			pageNumbersElement.empty();
			
			// ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œë„ í˜ì´ì§€ë„¤ì´ì…˜ í‘œì‹œ
			if (currentProducts.length === 0) {
				$("#prevGroup, #nextGroup").hide();
				let btn = $("<button>")
					.text(1)
					.addClass("btn mx-1 btn-purple btn-purple-active")
					.prop("disabled", true);
				pageNumbersElement.append(btn);
				return;
			}
			
			$("#prevGroup, #nextGroup").show();
			
			let startPage = Math.floor((currentPage - 1) / pageGroupSize) * pageGroupSize + 1;
			let endPage = Math.min(startPage + pageGroupSize - 1, totalPages);
			
			// ìµœì†Œ 1í˜ì´ì§€ëŠ” í•­ìƒ í‘œì‹œ
			endPage = Math.max(1, endPage);
			
			// ì´ì „ ê·¸ë£¹ ë²„íŠ¼
			$("#prevGroup")
				.prop("disabled", startPage <= 1)
				.removeClass("btn-secondary")
				.addClass("btn-purple");
			
			// í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤
			for (let i = startPage; i <= endPage; i++) {
				let btn = $("<button>")
					.text(i)
					.addClass("btn mx-1 btn-purple")
					.on("click", function() {
						if (currentPage !== i) {
							currentPage = i;
							displayCurrentPage();
							updatePagination();
						}
					});
				
				if (i === currentPage) {
					btn.removeClass("btn-purple").addClass("btn-purple-active");
				}
				
				pageNumbersElement.append(btn);
			}
			
			// ë‹¤ìŒ ê·¸ë£¹ ë²„íŠ¼
			$("#nextGroup")
				.prop("disabled", endPage >= totalPages)
				.removeClass("btn-secondary")
				.addClass("btn-purple");
		}

		// ì´ì „/ë‹¤ìŒ ê·¸ë£¹ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
		function initializePaginationButtons() {
			$("#prevGroup").on("click", function() {
				if (!$(this).prop("disabled")) {
					currentPage = Math.max(1, currentPage - pageGroupSize);
					displayCurrentPage();
					updatePagination();
				}
			});

			$("#nextGroup").on("click", function() {
				if (!$(this).prop("disabled")) {
					currentPage = Math.min(totalPages, currentPage + pageGroupSize);
					displayCurrentPage();
					updatePagination();
				}
			});
		}

		// Delete ë²„íŠ¼ ì´ë²¤íŠ¸ ë°”ì¸ë”©
		function bindDeleteButtons() {
			$(".deleteBtn").off("click").on("click", function() {
				let productId = $(this).closest("tr").find(".productId").text().trim();
				handleDelete(productId);
			});
		}

		// Delete ì²˜ë¦¬
		function handleDelete(productId) {
			if (confirm("ì •ë§ë¡œ ì´ ì œí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
				$.ajax({
					url: `/admin/product/delete/${productId}`,
					type: "GET",
					success: function() {
						searchProducts(); // ì‚­ì œ í›„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
					},
					error: function() {
						alert("ì œí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
					}
				});
			}
		}

		// Edit ì²˜ë¦¬
		function handleEdit(button) {
			let row = $(button).closest("tr");
			
			// ëª¨ë‹¬ ì œëª© ë³€ê²½
			$("#exampleModalLabel").text("Edit Product");
			
			// ê°’ ì±„ìš°ê¸°
			$("#modalIndex").val(row.find(".productId").text().trim());
			$("#modalName").val(row.find(".name").text().trim());
			$("#modalWidth").val(row.find(".width").text().trim());
			$("#modalDepth").val(row.find(".depth").text().trim());
			$("#modalHeight").val(row.find(".height").text().trim());
			$("#modalWeight").val(row.find(".weight").text().trim());
			$("#modalCategory").val(row.find(".category").text().trim());
			
			// Fragile ìƒíƒœ ì„¤ì •
			let isFragileText = row.find(".isFragile").text().trim();
			$("#fragileCheckbox").prop("checked", isFragileText === "Yes");
			
		    $("#exampleModal").removeAttr("aria-hidden");

		    // ëª¨ë‹¬ ì—´ê¸°
		    $("#exampleModal").modal("show");
		    
		 	// ğŸ”¥ Bootstrapì˜ `shown.bs.modal` ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•´ í¬ì»¤ìŠ¤ ì¡°ì •
		    $("#exampleModal").on("shown.bs.modal", function () {
		        $("#modalName").trigger("focus"); // ì²« ë²ˆì§¸ ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
		    });
		 	
		    // ğŸ”¥ ì¶”ê°€: ëª¨ë‹¬ì´ ë‹«í ë•Œ ì´ë²¤íŠ¸ ì •ë¦¬
		    $("#exampleModal").on("hidden.bs.modal", function () {
		        $("#exampleModal").off("shown.bs.modal hidden.bs.modal"); // ì´ë²¤íŠ¸ ì •ë¦¬
		    });
			
		}

		// Submit ì²˜ë¦¬
		function handleSubmit() {
			let product = {
				productId: $("#modalIndex").val().trim(),
				name: $("#modalName").val().trim(),
				width: $("#modalWidth").val().trim(),
				depth: $("#modalDepth").val().trim(),
				height: $("#modalHeight").val().trim(),
				weight: $("#modalWeight").val().trim(),
				category: $("#modalCategory").val().trim(),
				isFragile: $("#fragileCheckbox").is(":checked") ? 1 : 0
				
			};

			if (!validateProduct(product)) {
				alert("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
				return;
			}

			if (product.productId) {
				updateProduct(product);
			} else {
				addProduct(product);
			}
		}

		// ì œí’ˆ ì¶”ê°€
		function addProduct(product) {
			$.ajax({
				url: "/admin/product/add",
				type: "POST",
				data: product,
				success: function() {
					$("#exampleModal").modal("hide");
					searchProducts();
				},
				error: function() {
					alert("ì œí’ˆ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
				}
			});
		}

		// ì œí’ˆ ìˆ˜ì •
		function updateProduct(product) {
			$.ajax({
				url: "/admin/product/update",
				type: "POST",
				data: product,
				success: function() {
					$("#exampleModal").modal("hide");
					searchProducts();
				},
				error: function() {
					alert("ì œí’ˆ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
				}
			});
		}

		// ì…ë ¥ê°’ ê²€ì¦
		function validateProduct(product) {
			return product.name && 
				   product.width && 
				   product.depth && 
				   product.height && 
				   product.weight && 
				   product.category;
		}

		// ëª¨ë‹¬ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
		function clearModalInputs() {
			$("#modalIndex").val("");
			$("#modalName").val("");
			$("#modalWidth").val("");
			$("#modalDepth").val("");
			$("#modalHeight").val("");
			$("#modalWeight").val("");
			$("#modalCategory").val("");
			$("#fragileCheckbox").prop("checked", false);
		}

		// ëª¨ë‹¬ ê´€ë ¨ JavaScript ìˆ˜ì •
		$('#exampleModal').on('show.bs.modal', function () {
			// ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ aria-hidden ì†ì„± ì œê±°
			$(this).removeAttr('aria-hidden');
		});

		$('#exampleModal').on('shown.bs.modal', function () {
			// ëª¨ë‹¬ì´ ì™„ì „íˆ ì—´ë¦° í›„ ì²« ë²ˆì§¸ ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
			$('#modalName').trigger('focus');
		});

		$('#exampleModal').on('hidden.bs.modal', function () {
			// ëª¨ë‹¬ì´ ë‹«í ë•Œ ì´ˆê¸°í™”
			clearModalInputs();
			$(this).removeAttr('aria-hidden');
		});
	</script>


	<!-- í˜ì´ì§• ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ -->
	<script>
		document.addEventListener("DOMContentLoaded",
			function() {
				var currentPage = 1;
				var rowsPerPage = 10; // í•œ í˜ì´ì§€ë‹¹ í‘œì‹œí•  í–‰ ìˆ˜
				var pageGroupSize = 10; // í˜ì´ì§€ ë²ˆí˜¸ ê·¸ë£¹ í¬ê¸°
	
				var table = document.getElementById("productTable");
				var tbody = table.querySelector("tbody");
				var rows = Array.from(tbody
						.getElementsByTagName("tr"));
				var totalPages = Math.ceil(rows.length / rowsPerPage);
				
				function updateTable() {
					rows.forEach(function(row) {
						row.style.display = "none";
					});
					var startIndex = (currentPage - 1)
							* rowsPerPage;
					var endIndex = Math.min(startIndex
							+ rowsPerPage, rows.length);
					for (var i = startIndex; i < endIndex; i++) {
						rows[i].style.display = "";
					}
				}
	
				function updatePagination() {
					var pageNumbersElement = document
							.getElementById("pageNumbers");
					pageNumbersElement.innerHTML = "";
					var startPage = Math.floor((currentPage - 1)
							/ pageGroupSize)
							* pageGroupSize + 1;
					var endPage = Math.min(startPage
							+ pageGroupSize - 1, totalPages);
					for (var i = startPage; i <= endPage; i++) {
						var btn = document.createElement("button");
						btn.innerText = i;
						if (i === currentPage) {
							btn.classList.add("active");
						}
						btn.addEventListener("click", (function(
								page) {
							return function() {
								currentPage = page;
								updateTable();
								updatePagination();
							};
						})(i));
						pageNumbersElement.appendChild(btn);
					}
				}
	
				// < í˜ì´ì§€ ì´ë™ ë²„íŠ¼ í´ë¦­ì‹œ ì´ë²¤íŠ¸
				document
						.getElementById("prevGroup")
						.addEventListener(
								"click",
								function() {
									var startPage = Math
											.floor((currentPage - 1)
													/ pageGroupSize)
											* pageGroupSize + 1;
									if (startPage > 1) {
										currentPage = startPage - 1;
										updateTable();
										updatePagination();
									}
								});
				
				// > í˜ì´ì§€ ì´ë™ ë²„íŠ¼ í´ë¦­ì‹œ ì´ë²¤íŠ¸
				document
						.getElementById("nextGroup")
						.addEventListener(
								"click",
								function() {
									var startPage = Math
											.floor((currentPage - 1)
													/ pageGroupSize)
											* pageGroupSize + 1;
									var endPage = Math
											.min(startPage
													+ pageGroupSize
													- 1, totalPages);
									if (endPage < totalPages) {
										currentPage = endPage + 1;
										updateTable();
										updatePagination();
									}
								});		
				
				updateTable();
				updatePagination();
			});
	</script>
</body>
</html>
